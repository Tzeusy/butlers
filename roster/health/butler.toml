[butler]
name = "health"
port = 40103
description = "Health tracking assistant for measurements, medications, diet, food preferences, nutrition, meals, and symptoms"

[butler.runtime]
model = "gpt-5.3-codex-spark"
max_concurrent_sessions = 3

[runtime]
type = "codex"

[butler.db]
name = "butlers"
schema = "health"

[[butler.schedule]]
name = "medication-reminder-morning"
cron = "0 8 * * *"
prompt = """
Check for active medications with scheduled times between 8:00 AM and 10:00 AM.
For each medication, verify whether a dose has been logged for today covering that time window.
Report any medications that are due but not yet logged.

ONLY use tools available via your MCP server. Do not attempt to access the database directly or use any tools that are not explicitly provided to you.
"""

[[butler.schedule]]
name = "medication-reminder-noon"
cron = "0 12 * * *"
prompt = """
Check for active medications with scheduled times between 12:00 PM and 2:00 PM.
For each medication, verify whether a dose has been logged for today covering that time window.
Report any medications that are due but not yet logged.

ONLY use tools available via your MCP server. Do not attempt to access the database directly or use any tools that are not explicitly provided to you.
"""

[[butler.schedule]]
name = "medication-reminder-evening"
cron = "0 20 * * *"
prompt = """
Check for active medications with scheduled times between 8:00 PM and 10:00 PM.
For each medication, verify whether a dose has been logged for today covering that time window.
Report any medications that are due but not yet logged.

ONLY use tools available via your MCP server. Do not attempt to access the database directly or use any tools that are not explicitly provided to you.
"""

[[butler.schedule]]
name = "weekly-health-summary"
cron = "0 9 * * 0"
prompt = """
Generate a comprehensive weekly health summary including:
- Weight trend over the past week (if weight measurements exist)
- Medication adherence rates for each active medication over the past week
- Symptom frequency and patterns over the past week
- Any notable changes or patterns identified from the data
Use the health_summary and trend_report tools to compile this data.
"""

[[butler.schedule]]
name = "memory-consolidation"
cron = "0 */6 * * *"
dispatch_mode = "job"
job_name = "memory_consolidation"

[[butler.schedule]]
name = "memory-episode-cleanup"
cron = "0 4 * * *"
dispatch_mode = "job"
job_name = "memory_episode_cleanup"

[modules.calendar]
provider = "google"

[modules.calendar.conflicts]
policy = "suggest"

[modules.contacts]
provider = "google"
include_other_contacts = false

[modules.contacts.sync]
enabled = true
run_on_startup = true
interval_minutes = 15
full_sync_interval_days = 6

[modules.memory]
