[butler]
name = "health"
port = 40103
description = "Health tracking assistant for measurements, medications, diet, food preferences, nutrition, meals, and symptoms"

[butler.runtime]
model = "gpt-5.3-codex-spark"
max_concurrent_sessions = 3

[runtime]
type = "codex"

[butler.db]
name = "butlers"
schema = "health"

[butler.switchboard]
url = "http://localhost:40100/mcp"
advertise = true
liveness_ttl_s = 300
route_contract_min = "route.v1"
route_contract_max = "route.v1"

[[butler.schedule]]
name = "weekly-health-summary"
cron = "0 9 * * 0"
prompt = """
Generate a comprehensive weekly health summary including:
- Weight trend over the past week (if weight measurements exist)
- Medication adherence rates for each active medication over the past week
- Symptom frequency and patterns over the past week
- Any notable changes or patterns identified from the data
Use the health_summary and trend_report tools to compile this data.
Deliver the summary via notify(channel="telegram", intent="send", message=<summary>).
"""

[[butler.schedule]]
name = "memory-consolidation"
cron = "0 */6 * * *"
dispatch_mode = "job"
job_name = "memory_consolidation"

[[butler.schedule]]
name = "memory-episode-cleanup"
cron = "0 4 * * *"
dispatch_mode = "job"
job_name = "memory_episode_cleanup"

[modules.calendar]
provider = "google"

[modules.calendar.conflicts]
policy = "suggest"

[modules.contacts]
provider = "google"
include_other_contacts = false

[modules.contacts.sync]
enabled = true
run_on_startup = true
interval_minutes = 15
full_sync_interval_days = 6

[modules.health]

[modules.memory]
