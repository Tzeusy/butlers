[butler]
name = "travel"
port = 40106
description = "Travel logistics and itinerary intelligence specialist for flights, hotels, car rentals, and trip planning."

[butler.runtime]
model = "gpt-5.3-codex-spark"
max_concurrent_sessions = 3

[runtime]
type = "codex"

[butler.db]
name = "butlers"
schema = "travel"

[butler.switchboard]
url = "http://localhost:40100/mcp"
advertise = true
liveness_ttl_s = 300
route_contract_min = "route.v1"
route_contract_max = "route.v1"

[modules.email]

[modules.calendar]
provider = "google"

[modules.calendar.conflicts]
policy = "suggest"

[modules.memory]

[[butler.schedule]]
name = "upcoming-travel-check"
cron = "0 8 * * *"
prompt = """
Daily pre-trip scan. Check for upcoming departures and check-ins within the next 48 hours.
Use upcoming_travel(within_days=2, include_pretrip_actions=true) to surface:
- Flights departing soon (with terminal, gate, PNR)
- Hotel check-ins approaching
- Missing boarding passes or travel documents
- Pending online check-in windows (24h before departure)
- Tight layover warnings

If any actionable items are found, notify the owner via Telegram with an urgency-ranked summary.
If nothing is upcoming, do not send a message.
"""

[[butler.schedule]]
name = "trip-document-expiry"
cron = "0 9 * * 1"
prompt = """
Weekly travel document expiry scan. Check all stored travel documents (passports, visas, insurance policies)
for expiry dates within the next 90 days.

For documents expiring within 30 days, create a calendar reminder if one does not already exist.
Notify the owner via Telegram with any documents approaching expiry, ranked by urgency.
If all documents are current, do not send a message.
"""
