[butler]
name = "switchboard"
port = 40100
description = "Routes incoming messages to specialist butlers"

[butler.runtime]
model = "gpt-5.3-codex-spark"
max_concurrent_sessions = 3

[runtime]
type = "codex"

[buffer]
queue_capacity = 100
worker_count = 3
scanner_interval_s = 30
scanner_grace_s = 10
scanner_batch_size = 50

[butler.db]
name = "butlers"
schema = "switchboard"

[modules.calendar]
provider = "google"
calendar_id = "07fd80d3b4464836e586759b1b8672f1f97f80a9d642a30482176246dff4510b@group.calendar.google.com"

[modules.calendar.conflicts]
policy = "suggest"

[modules.telegram]

[modules.telegram.user]
enabled = false

[modules.telegram.bot]
token_env = "BUTLER_TELEGRAM_TOKEN"

[modules.memory]

[modules.email]

[modules.email.user]
enabled = false

[modules.email.bot]
address_env = "BUTLER_EMAIL_ADDRESS"
password_env = "BUTLER_EMAIL_PASSWORD"

# Connector statistics rollup and pruning jobs
[[butler.schedule]]
name = "connector-stats-hourly-rollup"
cron = "5 * * * *"
dispatch_mode = "job"
job_name = "connector_stats_hourly_rollup"

[[butler.schedule]]
name = "connector-stats-daily-rollup"
cron = "15 0 * * *"
dispatch_mode = "job"
job_name = "connector_stats_daily_rollup"

[[butler.schedule]]
name = "connector-stats-pruning"
cron = "30 1 * * *"
dispatch_mode = "job"
job_name = "connector_stats_pruning"

[[butler.schedule]]
name = "memory-consolidation"
cron = "0 */6 * * *"
dispatch_mode = "job"
job_name = "memory_consolidation"

[[butler.schedule]]
name = "memory-episode-cleanup"
cron = "0 4 * * *"
dispatch_mode = "job"
job_name = "memory_episode_cleanup"

# Butler registry liveness sweep
[[butler.schedule]]
name = "eligibility-sweep"
cron = "*/5 * * * *"
dispatch_mode = "job"
job_name = "eligibility_sweep"
